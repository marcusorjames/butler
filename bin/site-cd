#!/bin/bash
# site cd subcommand

PACKAGE="butler site cd"
DIR=$(readlink -f "$(dirname "$(readlink -f "$0")")/../")
COMMON=$DIR/bin/common

. $COMMON/setup.sh
. $COMMON/functions.sh

setup

print_usage() {
  echo "Change directory into site"
  echo " "
  echo "SYNOPSIS:"
  echo " "
  echo "$PACKAGE NAME"
}

main() {
  [ ! "$#" -gt 0 ] && print_usage && exit 1

  site="$1"
  shift

  if ! site_dir="$(get_site_dir "$site")"; then
    die_with_error "Site ${CWarn}$site${Color_Off} doesn't exist"
  fi

  cd $site_dir
  $SHELL
}

main "$@"
